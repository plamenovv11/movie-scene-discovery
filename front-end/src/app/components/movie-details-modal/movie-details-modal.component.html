<!-- Movie Details Modal -->
<div class="movie-details-overlay" (click)="onClose()">
  <div class="movie-details-modal" (click)="$event.stopPropagation()">
    <button class="close-button" (click)="onClose()">
      <mat-icon>close</mat-icon>
    </button>

    <div class="movie-details-content">
      <!-- Movie Header -->
      <div class="movie-details-header" [style.background-image]="'url(' + getBackdropUrl(movie?.backdropPath) + ')'">
        <div class="movie-details-overlay-bg"></div>
        <!-- Play Button Overlay -->
        <div class="play-button-overlay" (click)="playTrailer()">
          <mat-icon class="play-icon">play_arrow</mat-icon>
          <span class="play-text">{{ movie?.youtubeTrailerId ? 'Play Trailer' : 'No Trailer Available' }}</span>
        </div>
        <div class="movie-details-info">
          <h1 class="movie-details-title">{{ movie?.title }}</h1>
          <p class="movie-details-overview">{{ movie?.overview }}</p>
          <div class="movie-details-meta">
            <span class="release-date">{{ formatReleaseDate(movie?.releaseDate) }}</span>
            <span class="rating">
              <mat-icon>star</mat-icon>
              {{ getFormattedRating(movie?.voteAverage) }}
            </span>
            <div class="genres">
              <mat-chip *ngFor="let genre of movie?.genres" class="genre-chip">
                {{ genre }}
              </mat-chip>
            </div>
          </div>
        </div>
      </div>

      <!-- Trailer Section -->
      <div class="trailer-section" [class.show]="showTrailer">
        <h3>Movie Trailer</h3>
        <div class="trailer-container">
          <iframe
            [src]="getYouTubeEmbedUrl(movie?.youtubeTrailerId)"
            frameborder="0"
            allowfullscreen
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            class="trailer-iframe">
          </iframe>
        </div>
      </div>
    </div>
  </div>
</div>
